<div class="subnav">

    <div class="button-stack left-stack" >
        <button class="navbtn hover" href="/#/liveblog">
            <i class="icon-th-large"></i>
        </button>
        <h2 class="page-nav-title">{{producer.name}}</h2>
        <ul class="nav nav-tabs pull-left" >
            <li ng-class="{active: activeState === state}" ng-repeat="state in states"><button ng-click="changeState(state)" translate>{{ ::state.text }}</button></li>
        </ul>
    </div>

</div>

<section class="main-section bloglist">
    <div class="list-container">
        <div ng-if="blogsLoading" class="loading-indicator" style="margin-top: 30px;"><span translate>Loading blogs...</span></div>
        <!-- empty state -->
        <div ng-if="blogs._meta.total === 0" class="empty-state">
            <div translate>No blogs found.</div>
        </div>
        <!-- GRID VIEW -->
        <ul class="card-list" ng-if="blogsView === 'grid'">
            <li ng-repeat="blog in blogs._items track by blog._id"
                title="{{ !isUserAllowedToOpenBlog(blog) ? requestAccessMessage: '' }}"
                ng-click="isUserAllowedToOpenBlog(blog) ? edit(blog): openAccessRequest(blog)"
                class="can-access">
                <figure class="media">
                    <div ng-if="blog.picture_url" if-background-image="{{blog.picture_url}}"></div>
                </figure>
                <div class="content">
                    <h3>{{ ::blog.title }}</h3>
                    <div class="description">{{ ::blog.description | htmlToPlaintext }}</div>
                </div>
                <div class="footer">
                    <dl>
                        <dt>{{ ::'Blog owner' | translate }}:</dt>
                        <dd>{{ ::blog.original_creator | username }}</dd>
                        <dt ng-if="isAdmin()">{{ ::'Theme' | translate }}:</dt>
                        <dd ng-if="isAdmin()">{{ ::blog.blog_preferences.theme }}</dd>
                        <dt>{{ ::'Created' | translate}}:</dt>
                        <dd sd-reldate ng-model="blog._created"></dd>
                        <dt>{{ ::'Last udpated' | translate }}:</dt>
                        <dd><time>{{ ::blog._updated | reldate }}</time></dd>
                        <dt>{{ ::'No. of Posts' | translate }}:</dt>
                        <dd>{{ ::blog.posts_count }}</dd>
                        <dl>
                        <dt> {{ :: 'Last posted' | translate }}:</dt>
                        <dd ng-if="blog.last_posted" sd-reldate ng-model="blog.last_posted"></dd>
                        <dd ng-if="blog.posts_count == 0"> No posts yet</dd>
                        </dl>
                        <dt>Syndication</dt>
                        <dd>
                            <span
                                sd-switch 
                                ng-change="syndicate(blog)" 
                                ng-model="blog.syndicated" 
                                class="sms-switch"></span>
                        </dd>
                    </dl>
                </div>
            </li>
        </ul>
    </div>

</section>
